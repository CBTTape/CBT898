%headline= '< CSD Analyser >'


.1. Introduction.
!G
)SKIP HER
 This macro is designed to analyse the contents of a viewed/edited listing of a
 CSD (not OBJECT as it would be too large and CSDA only uses the standard LIST
!t  !     r     !                             y   !                       w
 portion.)
 It's primary objective is to give a hierarchical presentation of selected
 entities, eg. what group(s) the entity(s) is defined in and which list(s) use
!                   w    !       w     !                           w   !
 those group(s).

 This routine will provide expansion of entity details by directly reading the
 CSD and supplying the appropriate details.  Refer below for further details on
!t  !
 field formats for entity types.

 If you are analysing TRANSactions and have supplied the CSD name, the executing
!                     y           !                      t  !
 program is reported. This is handy when different groups contain the same
 transaction with a different executable program.

 If the CSD is available, you may fine tune your selections by setting field
!       t  !
 comparisons. (For further details, refer to the "/MF" parameter.)
!                                                 y  !

.2. Output summary.
!G
 The following are delimiters used to identify the type of data/fields being
 presented in the report:
=y   !
   > List of groups the entity belongs to.
   + List of lists the group belongs to.
   - Group not used by any lists.
   » Fields extracted from the CSD (as set up in the field definition matrix).
!y  !                          t  !
     Any field exceeding the maximum allowable length (should not be greater
     than 42 characters) will have the leading characters truncated and replaced
     by '«'.
!        y!
   * Description (extracted from CSD if it is defined in matrix).
!y  !                            t  !
   ¢ Date/time last modified.

=
 The output is presented as =NOTE= lines and it is recommended that you view the
!                           t     !
 CSD list so that the notelines can be converted to data using the 'md' line
!t   !                                                              g !
 command to permit text/data manipulation without accidentally changing the
 list.

 This tutorial will be placed before line 1 and reports placed after line 1
 thereby permitting display of the tutorial at the top of the file and always
 before the report.

 Items of note:
!g
   1. You can get a list of all the groups not used in a list by specifying
!y    !
      GROUPS(*) which will list all the LISTs the group is defined in. Any
!     y        !                        w   !
      summary without lists, ie. - Lists(), are orphaned groups.
!                                w        !
      (Late breaking news: Use parameter /OGx instead.)
!      c                  !              y   !

                            ***********

.3. Parameters.
!G
.3a. Summary Positional:
!g
   1. itemtype(item) | itemtype item | item
!y  !y               !y              !y

.3b. Summary Keyword.
!g
   /#  - Data entry screen.
!y     w!
   /1  - One liner output.
!y     w!
   /13 - TS1.3 or earlier.
!y     w!  y!y!
   /21 - CICS TS2.1 or later.
!y     w!       y!y!
   /A  - Append report.
!y     w!y!
   /B  - Execute in Batch.
!y     w!           y!
   /CA - Column Align.
!y     wy !     y!
   /C  - Changed date/time stamp.
!y     wy !
   /CE - Change date to European format.
!y     wy !             y!
   /CJ - Change date to Julian format.
!y     wy !             y!
   /CSD(csd_dataset)
!y
       - CSD dataset to use.
!y     wy   !
   /CSDC
!y
       - Invoke CSDC to generete define statements.
!      w!       y   !
   /CU - Change date to USA format.
!y     wy !             y!
   /D  - List Description.
!y     w!     y!
   /H  - Hardcopy for batch jobs (and on-line).
!y     wy !
   /HE - Hardcopy Edit.
!y     wy !       y!
   /HNE- Hardcopy No Edit.
!y     wy !       y! y!
   /MF(match_field_list | *)
!y                      !y
       - Match Fields.
!y     wy !    y!
   /MG - Multi Group.
!y     wy !    y!
   /NA - No Append.
!y     wy ! y!    y! y!
   /NC - No Changed date/time stamp.
!y     wy ! y!
   /NCA- No Column Align.
!y     wy ! y!     y!
   /ND - No Description.
!y     wy ! y!
   /NF - No Fields.
!y     wy ! y!
   /NR - Do Not attempt to Read/process the CSD.
!y     w !  y!             y!
   /NS - No Seperator lines.
!y     wy ! y!
   /O  - On-line execution.
!y     wy !
   /OD - Orphaned Delete (excluding IBM DFH* groups).
!y     wy !       y!
   /OF(only_field_list | *)
!y                     !y
       - Only Fields.
!y     wy !   y!
   /OG - Orphaned Groups (excluding IBM DFH* groups).
!y     wy !       y!
   /OGI- Orphaned Groups (including IBM DFH* groups).
!y     wy !       y!                y!
   /PL(nnnnn | *)
!y    !y     !y !
       - Increase the Processing Limit.
!      w!              y!         y!
   /R  - Attempt to Read/process the CSD.
!y     w!           y!
   /SF(suppress_field_list | *)
!y                         !y
       - Suppress Fields.
!y     wy !       y!
   /T  - Turn REXX trace on. Used for debugging.
!y     wy !
   /TS - Time Sort.
!y     wy !   y!
   /XT - eXit after Tally.
!y     w! y!        y!
   ?   - This tutorial.
!y     w!

.3c. Detailed.
!g
 Keyword parameters will be evaluated first and removed from the parameter list
 as they are encountered.  The remaining string(s) will be interpreted as
 positional parameters.

.3d. Positional parameters.
!g
 Note: While keyword paramaters may precede positional ones, any misspelt
!w    !
       keyword paramaters will be treated as positional parameters.
       Consequently get into the practice of using keyword as the trailing
       parameters.

.3e. Positional.
!g
   1. itemtype(item) | itemtype item | item
!y  ! y              !y              !y
      Where:
         itemtype - selection of the type of item to report.  Execute CSDA
!y                w!                                                  y
                    without parameters to display an input panel that will list
                    all the permissable item types and acceptable abbreviations.
         item     - You may enter any combination of items (comma seperated) or
!y                w!
                    you may wildcard item by using an optional leading and/or
!                                    y   !
                    trailing *. It is suggested that a more discreet than more
!                            y!
                    generic searches be used as too many hits may blow out
                    response.  (That is why * by itself is batch forced as a
!                                           y!
                    TRANS(*) batch process for a medium sized CSD took over 3
!y                          !                                               r
                    hours to execute. If fact a /XT report on a 8000
!                                               y  !            w
                    transaction CSD took about 10 minutes in batch.)
!                               t  !           g !

                    Note: Item(s) is not case sensitive and CSDA will report
!w                        y      !                          y   !
                          on both upper and lower (and mixed) case items.
                          However, the input screen is case sensitive so if you
                          enter in upper case, only the upper case hit will be
                          reported.
                        : Choosing * will force batch processing unless it is
!w                       !         y!
                          overridden using the /O parameter. The exception for
!                                              y !
                          this is GROUP(*) which is permitted on-line.
!                                 y       !
                        : To extend your search use a combination of wildcarded
!w                       !
                          items (comma seperated).  For multi items you can
                          'globalise' the wildcarding by including the items
                          between brackets with any potential prefix and/or
                          suffix outside the brackets, eg.
                             (d,h,yy)*    -> d*,h*,yy*
!y                                        t  y
                             a(bb,ee,xy)* -> abb*,aee*,axy*.
!y                                        t  y
                          Don't forget the itemtype, eg.
!                                          y       !
                             trans(*(bb,ee,xy)*)
!y
                          (You may ask why?  Because I can and I needed variety
                           for testing!!!)
      If only one parameter is used, it will be assumed to be items and the
!                                                             y    !
      default is,
          'TRANSactions(items)'
!y

.3f. Keyword parameters.
!g
   Many of the keyword parameters are purely provided to fine tune display
   options and speed up processing.  On slow systems or when large amounts or
   output is anticipated, consider the following and either adjust the default
   settings in the REXX program CSDA or supply swithes from the list below.
!                               y   !

   1. Disabling the facility to read the CSD will save significant the cycles.
!y  !                                    t  !
      Either set the variable "readCSD" to 0 (zero) in CSDA$ or use the /NR
!                              y      !    w!          y    !           y
      keyword. This is recommended if you only want a cross reference of
      items/groups/lists and DO NOT want available item details reported. If
!w         !w     !w    !    r     !
      "readcsd" is set to 0, use the /R keyword to read the CSD.
!      y      !           w!         y !                    t  !
=y  !
   2. Description may provide unnecessary noise (display clutter).
   3. All defined field values, especially when most are not defined
      can clutter displays.
   4. The align feature eliminates/minimises clutter, however, adds
      cycles to processing required.
   5. Date changed report can significantly increase processing time
      espoecially for large outputs.  Consider suppressing it or
      set it to Julian (as either default or parameter) as this will
      bypass invoking $DATEMAN for conversion to other formats.
!                     y       !
=

.3g. Keywords GOTCHAS.
!g
=y      !
     1. Keyword parameters may be entered/Changed in the primary input screen.
        Only those marked with a 'o' are changeable.
!                                 w!
     2. Watch stacked commands.  For example the following command will not give
        desired results.
             CSDA PI(ECT2IMS) /NA /H;CSDA TC(SOAPPORT) /H
!y                                r !y
        a) The first command will output data to hardcopy (with no-append).
!y         !
           However the hardcopy will be presented under editor and the second
           command will be executed against the hardcopy.  This is NOT what you
           want.  You want the second command to be executed against the CSD
           listing.
        b) To bypass the edit session you should replace the first /H
!y         !                                                       y
           parameter with a /HNE which will process with no edit and as we are
!                           y    !
           not editing hardcopy infers a hardcopy is required and will turn it
           on.  So the command should be,
             CSDA PI(ECT2IMS) /NA /HNE;CSDA TC(SOAPPORT) /H
!y                                g   !y

.3h.  Keywords.
!g
=y     w!
   /#  - Explicitly force data entry screen regardless of parameters
         entered.
         Use this parameter to get into screen display if you wish to
         get into the 'field selection for reporting' display.
   /1  o One liner output. Output each field on a seperate line.  Why?  Because
         I can and needed it (once).
   /13 o Indicate that the CSD is for CICS TS1.3 or earlier.  This parameter
         will flag positional parameters as unavailable thereby preventing
         erroneous reporting and speed up processing. (Unavailable fields will
         be summarised in the report.)
         Note: EXECIOVS is used to establish average record length for the CSD
!w             y       !
               file. If it is not 200, it will be interpreted as pre TS2.1 and
!                                 r  !                           r        !
               this flag will automatically set and user notified prior to
               progressing.
   /21 o Explicitly set CICS version to TS2.1 or later. Use this to reverse
         TS1.3 detection (with reservation as may blow out response times).
   /A  o Append report (do not remove previous notelines).
   /B  o Execute in batch.  Use this flag for large CSDs and when you expect
         long execution.  This format will be enforced if * item is chosen
!                                                         y!
         for fields in the no_wild parameter list in CSDA$.  This can be
!                          y       !                 y    !
         overriden using the /O parameter.  You have been warned, do it at
!                            y  !
         your own peril.
   /C  o Changed date/time stamp. Explicitly display changed date/time
         regardless of default setting.
         Note: Variable listdate can be set in routime CSDA$ to set default
!w            !         y       !                      y    !
               date changed display defaults.
             : Date will be displayed in the format dd/mm/yyyy if $DATEMAN is
!w            !                                     g         !   y       !
               available otherwise yy.mmm will be used.
             : If $DATEMAN is available variable datefmt can be set in routine
!w            !   y       !                      y      !
               CSDA$ to set default format to E(uropean), J(lulian) or
!y                  !                         y!          y!
               U(SA).
!y              !
             : $DATEMAN is an external routine and is invoked for each hit and
!w             y       !
               may take up larger than desired cycles in generating reports.
   /CA - Column Align.  To align columns based on a field length of 8 if the
         lenght is <8.  Alternatively rearange the report field order in CSDA$
         or change the report field length to 8 (max size except for description
         and a few WEB related fields). Aligning columns will increase the
         physical size of the report.
         Note: Variable autoalign can be set in this routine to 'auto align'
!w            !         y        !
               without the /CA parameter.
!                          y   !
   /CE o Changed Date stamp to European format dd/mm/yyyy regardless of variable
!y     w!                      y!              g          !
         datefmt setting.
!        y      !
   /CJ o Changed Date stamp to Julian format yy.ddd regardless of variable
!y     w!                      y!            g      !
         datefmt setting.  This is the default format and quickest in processing
!        y      !
         requirements which may be worth consideration on slow systems or high
         output volumes.
   /CSD(csd_dataset)
!y
       - CSD dataset. This value is used to get additional entity details for
         detailed analysis.
         Without this parameter it will look for eyecatcher
            "  CSD file: 'CSD_dataset....' "
!g
         which has to be manually entered (or let CSDL do it for you).
!                                                 y   !
   /CSDC
!y
       - Invoke CSDC to generate define statements for the entry extracted from
!w       !      y   !
         the line the cursor is on.  You use this function to generate a DEFINE
         statement for the resource in the group that can be canabilised to nake
         a customisable ALTER statement.  The cursor MUST be on the line that
!                       t     !                      r    !
         lists both the resource and it's appropriate group.
         You can pass it a sub-parameter of /M to create a new entry dataset
!                                           y !
         used by the CSDC function.  By default a parameter of /MA is passed to
!                    y   !                                     y  !
         append to existing dataset.
         If you are building a list of define/alter statements, you can also use
         the /NJ (CSDC parameter) to prevent CSDC to present JCL for submission.
!            y  ! y   !                      y   !
         (By default, the /NJ parameter will be used for all bar the last
!                         y  !
         group for a resource defined in a number of groups.)
         For futher details, refer to CSDC documentation.
!                                     y   !
   /CU o Changed Date stamp to USA format mm/dd/yyyy regardless of variable
!y     w!                      y!         g         !
         datefmt setting.
!y              !
   /D  - List Description if available from CSD dataset.
!y     w!
   /H  o Hardcopy for batch jobs (or on-line).  Output to dataset,
!y     w !
&          '&OUTDSN.'.
!y
         Notes:
!w
           1. For batch jobs, '.Dyymmdd' will be used as a suffix.  Output will
!w            !                t       !
              be MODded to the dataset so the first run for the day will create
              the dataset.  If you don't want to append, delete the dataset
              prior to execution (commented JCL will be provided).
           2. For on-line jobs you must explicitly request appending using the
!w            !
              /A parameter.  You have been warned.  Without the /A, existing
!             y !            r                    !             y !
              data will be creamed and you will need to start again, which could
!                          r      !
              be a painn if you're well advanced into building a large list.
   /HE - Hardcopy Edit.  Edit the dataset created using the /H parameter.
!y     w !                                                  y !
         Automatically evaluates the dataset and you don't have to run off and
         look for it.
   /HNE- Hardcopy No Edit.  When processing on-line with the /H option, the
!y     w !                                                   y !
         hardcopy will be editted after processing.  When nesting commands (or
         building a composite list) you can bypass the edit using this command.
         You can later edit the hardcopy by using the /HE command.
!                                                     y  !
         Note: This parameter automatically enables the /H option so you may
!w             !                                        y !
               leave it out.  No bad if you don't (short of a few extra
               cycles).
   /LM - Last Message.  Re-display the last message displayed when CSDA
!y     w !
         processing was terminated.  Use this when you accidentally hit a key
         that removes the message before you were smart enough to read it.
   /MF(match_field_list | *)
!y                      !y
       - Match Fields. Provide a list of field (comma or space seperated) to
         perform a comparison with. This is additional to the /OF and /SF
!                                                             y  !    y
         parameters if used.
         For all fields in the list an interim = is placed into the field
!                                              y!
         selection field for the upcomming field selection screen. The remaining
         fields will be set in accordance with the /OF and /SF field list.  (If
!                                                  y  !    y  !
         neither is used, all fields will be set to 'Y'.)
!                                                    y!

         You may overtype the system generated parameter by any of the following
         (these are also applicable for the field selection/suppression
         features):
=y             !
             =  Field value equal to.
             >  Field value greater than.
             <  Field value less than.
             /  Field value not equal to (expanded to '/=').
!y             !                                       y  !
             Y  Ignore field matching but report field
             b  Blank, Ignore field matching and do not report field.
             x  Any other character will be treated as 'Y'.
!y             !                                        y!
=
         If =, >, < or / is entered, a subsequent screen is presented for
!           y! y! y!   y!
         comparison value entry.
         You may enter any value. It will be used in a literal comparison.  You
         may wildcard values by using a trailing '*' in which case the '*' will
!                                                 y!                    y!
         be dropped off and the field value truncated to the same length befor
         the comparisson is made.
         Note: You still cannot do a global seach, however you can
!w            !
               maximise your scope with a two pass of the following,
                  CSDA TRANS((A,B,C,D,E,F,G,H,I,J,K,L,M)*) /MF(X)
!y
                        - followed by -
                  CSDA TRANS((N,O,P,Q,R,S,T,U,V,W,X,Y,Z)*) /MF(X) /A
!y
               (This would cover all the alphabetic transaction, however, I'd
               hate to be the one waiting for completion especially on a large
               CSD.)
=y     w!
   /MG - Multi Group. Only report items that belong to more than 1 group.
!y     w!                         y    !
         This is to determine what combination of settings may be in play
         (accross systems).
         All items found will be listed, however, only items in more than one
         group will be detailed.
         All multi-group item hits will be summarised at the end of the report.
   /NA o No Append.  By default no-append is the default for NOTELINE output,
         however, append is the default for hardcopy.  Use this to either
         deliberatelly no append or to clear the file for the first run.
   /NC o No Changed date/time stamp.  Explicitly suppress changed date/time
         regardless of default setting.
   /NCA- No Column Align. (Only provided for completeness because of the /CA
!y     w!                                                                y
         parameter and autoalign variable.)
!                      y        !
   /ND - No description even if available from CSD dataset.
   /NF - No Fields. This is further to the /D option. Even if the
!y     w!                                  y !
         CSD is accessible, do not get and display the 'field'
         details that would be available. (This value forces /D so it
!                                                            y !
         is not required and will negate any /OF or /SF lists.)
!                                            y  !   y !
   /NM - No Match.  Normally if /MF parameters are entered and no match is
!y     w!                        y !
         found the following entry is diplayed:
            TRANSaction(tttt) > Groups(gggggggg)
!y
                                *** No match for "Match_field_on" ***
!y
         This parameter will suppress the 'no match' message.
   /NR o Do not attempt to read/process the CSD, even if the required
         tools are available.  This will automatically activate the
         /NF switch.
!y          !
         Note: Variable readCSD can be set in routine CSDA$ to either enable or
!w            !         y      !                      y    !
               disable the default CSD process.
             : If /NR is in effect, the DFHCSD field becomes protected and the
!w            !   y  !                  y     !
               color reversed.
             : If /NR is set you will need to exit process to reverse it as
!w            !   y  !
               there is no converse of /NR.
!                                      y  !
   /NS - No seperator lines. Removes/adds to the congestion (depending on your
         point of view).
   /O  o On-line execution.  In cases when the system enforces batch execution
         because of full wildcarding (*) on fields in the "no_wild" parameter
!                                     y!                   y      !
         list in CSDA$ you can force on-line execution.
!                y    !
   /OD - Orphaned Delete. Generate JCL to delete all orphaned groups This flay
         will automatically set "/OG".  Needs access to "CSDL" to set up job to
!                                y  !                    g   !
         delete orphan groups.  IBM goups (DFH*) are excluded.
   /OF(only_field_list | *)
!y
       - Only Fields. Provide a list of field (comma or space seperated) to
         report.  This is an alternative to supressing all fields using the
         /NF parameter or playing with the report flags on the itemflds
!y          !                              y     !             y
         variable in CSDA$ member.  The field list is not case sensitive but
!                    y    !
         must match the full spelling of the field which may be obtained from a
         listing of the tutorial of by browsing member CSDA$.
!                                                      y    !
         Alternatively use field name of '?' to provide a list of valid fields
!                                         y!
         for that item type.  These values will be used to populate the field
         selection screen if it is selected.  If '*' is entered, you will either
!                                                 y!
         be directed to the field selection screen or the field selection screen
         flag will be set in the data entry screen without any fields selected.
   /OG - Orphaned Groups. Only lists groups that are not defined in a valid
         list. IBM goups (DFH*) are excluded.
   /OGI
       - Orphaned Groups (including IBM defined groups).  Same as /OG except
!w       !                                                        y  !
         that unused IBM goups (DFH*) are also listed.
!                               w   !
   /PL(nnnnn | *)
!y    !y     ! y!
       - Increase the processing limit.
&        Variable "proc_lim" in 'CSDA$' is set to "&PL." to control on-line
!                  t       !     g    !
         processing.  If this value is exceeded by the number of
         entries, you can either force on-line processing using the "/O"
!                                                                    y !
         parameter or use this to increase the threshold but still control the
         number processed without unnecessary hangs.  Using a parameter of '*'
!                                                                           y!
         will process all regardless of number and inefficiency in execution.
         The difference is that when you use the "/PL()" parameter a progress
!                                                 y    !
         meter is displayed to keep track of the progress level.
&        Variable "pop_upf" (currently set to "&PU.") is set in 'CSDA$' and
!                  t      !
         is used as the pop up display frequency processor.  Alternatively
         change the variable's value in 'CSDA$'.
   /R  o Attempt to read/process the CSD.  If the tools are not available a read
         attempt will be performed and resultant action modified accordingly.
         (For further details, refer to the /NR parameter.)
!                                           y  !
         Note: Variable readCSD can be set in routine CSDA$ to either enable
!w             !        y      !                      y    !
               or disable the default CSD process.  Use this parameter if it
               readcsd is set to 0 for default performance purposes.
!w             y      !          w!
             : Set variable try2read to 1 or 0 for default settings.    (The
!w            !             y       !   w!   w!
               dafeult is 1 (try to read) and depending on it's setting, use
               /NR or /R to toggle action to be performed. This setting should
!y                !   y !
               be governed by the availability of VSAM read facility and
               response time preferances.)
   /SF(suppress_field_list | *)
!y                         !y
       - Suppress Fields.  Provide a list of field (comma or space seperated) to
         suppress from the report.  This is an alternative to supressing fields
         you don't think are meaningfull for your circumstance and you do not
         wish to use the field selection screen.  Alternatively you can either
         suppress the field by setting the report flag to 'N' against the field
!                                          y     !         w!
         on variable itemflds in member CSDA$ if that is acceptable by all at
!                    y       !          y    !
         your site or arange for a personalised copy of CSDA$.  (If the later
!                                                       y    !
         option is selected, you may miss out on any important future updates or
         repeat the process when an upgrade is isntalled.)  If '*' is entered,
!                                                               y!
         you will either be directed to the field selection screen or the field
         selection screen flag will be set in the data entry screen without all
         fields selected.
         Note: This option actually sets the all fields report flag to 'Y' and
!w            !                                                         w!
               sets these fields to 'N'.  This will be evident if you invoke the
!                                    w!
               field selection panel.
   /T  - Turn REXX trace on. Used for debugging.
   /TS o Time Sort.  Used for debugging to fine tune the setting for variable
         isort_limit in CSDA.  If response is bad, use the /TS parameter to time
!       y           !   y   !                              y  !
         the sort reporting start, end and duration and /XT to exit befor
!                                                       y  !
         reporting details.  If the sort takes > 30 seconds and isort_limit has
!                                                               y          !
         not been exceeded, suggest reducing it till a happy comprimise is
         reached.  By default the isort_limit should be set at around 200 to
!                                 y          !                        r  !
         minimise file creation/deletion and I/O. The break- even value between
         $SORT and SORT is between 100-150 items, however, this may be
!        r    !    g   !
         influenced by site responses to file creation/deletion and I/O hence
         the 200 initial compromise.
         Note: This should only be an issue if SORT is not available at your
!w            !                                y   !
               site.
   /XT - eXit after Tally.  This parameter is designed for batch processing to
         list all the items for a particular item type sorted. Once reported
         processing terminates.  This is useful to then run more discreet
         selections.
   ?   - This tutorial. But you already know that. Don't you?
=
   Parameters /D and /ND should be used depending on site defaults, (ie. if
!             y !    y  !
   default is to display description then use /ND to suppress it). This
!                                             y  !
   default is set by variable listdesc at the top of the REXX program CSDA$.
!                             y       !                               y    !

   Use parameters /D, /ND and /NF to reduce the "noise" in larger analysis
!                 y ! y  ! y  !
   reports and/or speed up processing. (Processing may take twice as long with
   full field reporting.)

   The following keywords (at least mutually exclusive ones),
     /13, /21, /A, /B, /C, /CE, /CJ, /CU, /O, /OG, /NC, /NM, /NS, /R,
!    y  ! y  ! y !y  !y  !y   !y   !y   !y  !y   !y   !y   !y   !y  !
     /NR, /TS, /XT and ?,
!    y  ! y  ! y   !   y!
   can be entered individualy or en-masse in the data entry screen to avoid
   exiting and re-invoking using the parameters. Other parameters can be changed
   using the input data fields.

.4. Screen entry fields.
!g
   1. Enter "item" as per above details.
!y    !      t   !
   2. "Itemtype" may be selected by code or place cursor on code or description.
!y     t       !
      The capital (white colored) part of "itemtype" can be used under parameter
!                                          t       !
      function entry, eg.
          CSDA TRANS(CED*,AA*)
!y             t    y
   3. DFHCSD. If you used the "CSDL" routine to list the CSD, it would have
!y    t     !                  g   !
      stamped the list with the source CSD dataset name which would then be
      extracted and inserted here.  Alternatively you can manually enter the CSD
      (unquoted).
      Note: Blanking out the CSD name (if available) will speed up processing
!w          !
            but not as significantly as the /NF or even more significantly the
!                                           y  !
            /NR switches.
!           y  !
   4. Description reporting. Set this to 'N' to suppress descriptions from being
!y    !                                   y!
      reported (if available).
?4.5
   5. Fields to include in the reports. If 'Y' is entered (will be set to 'Y' of
!y    !                                     y!                             y!
      /OF parameters are passed and screen display is entered. (See below for
!y       !
      field report screen.)
   6. Allign fields in the report. Used for presentation and where field sizes
!y    !
      adversely affect the esthetics of the report lay- out.

.5. Field selection screen.
!g
   If option 4.5 above (under Screen entry fields) is set to 'Y' a screen will
!            2  !             g                  !            y!
   be displayed with the main body part listing all the available fields that
   may be included in the report. If /OF parameters are supplied, they will be
!                                    y  !
   used to set 'Y' values against their respective fields.  If /SF parameters
!               y!                                             y  !
   are supplied, they will be used to set 'Y' values against all fields and ' '
!                                          y!                                G!
   (space) against their respective fields.

   On exit (either by using enter or END PF key) control will always be
   passed to the main parameter entry screen even if it was not
   initially displayed.

   Enter any non blank character in the input field before the field
   name to select for reporting.  Return will be passed to the previous
   screen with the fields reported defined as if the "/OF" parameter
   was used.  Once this screen is entered and no fields are selected
   then all fields will be excluded from the report (same as if "/NF"
   parameter used on entry).

   Field selection screen entry commands:
      ALL  - Selects all fields.  Use this command to reset all fields
!y         w!
             in case screen previously exited without a selection.
             (This will negate any /MF and /NF setting.)
!                                  y  !    y  !
      NONE - Unselect all fields.  Quicker than repetaed TAB overtype
!y         w!
             with space.
      SORT - Sort field name display alphabetically.
!y         w!
             NOTE:- This sort is for selection only and will not alter
!w                  !
                    the field sequences in the report.

   For explanation of the fields refer to the CICS manual. Field sequence
   and tend follow the CEDA display sequence. Field names are limited to
   6 characters so some of them may be somewhat cryptogramic.

)HER
.6. Packaging.
!G
   The following members are required to package this function.  Those
   marked with an 'o' seperator are optional and enhance the available
!                  w!
   features:
    REXX:
!g       !
=y            w!
     $CSTRING - Change string.  Used to build the field selection screen.
     $DDALLOC o Required by BATCHISP (if used).
     $SORT    o Routine top sort a string of space seperated words.  If the
                routine is not found, the transaction item(s) report will not be
                sorted. (For large lists, IBM's sort is used.)
     $WORDAT  - Identify text according to column position. Required for parsing
                data to format output.
     BATCHISP o Required to get default ISPF datasets to execute in batch.
     BR       o Required to display these instructions under browser when help
                (?) is invoked from panel.
                If unavailable, you will get a red screen.
     CSDA     - This driver.
     CSDA$    - External variable setter. Externally designed to permit sites to
                customise field definitions external to the CSDA driver.
     CSDR     o CSD reader.  May be included instream in selective packaging of
                CSDA. Required to read the CSD for field values past the
                standard group/list details.  (It requires access to EXECIOVS.
                Unavailability will force the /NF option.)
!                                             y  !
     $DATEMAN o Date converter required if the /C option is requested or
!                                              y  !
                defaulted.
     EXECIOVS o EXECIO format VSAM file reader required by CSDR.  Uses program
                RXVSAM (see below).
    Panels:
!g         !
     CSDAP    - Self extracted out of this routine.
    Programs:
!g            !
     RXVSAM   o VSAM reader. (Off CBT tape.) Used by EXECIOVS.
     SORT     o IBM sort.  Called upon when number of items to report exceed
                variable "isort_limit" at start of 'CSDA$'.  This sort is much
!                         t          !
                quicker than the REXX bubble sort $SORT but it need to allocate
                I/O files hence do not set "isort_limit" too low unless sort
!                                           t          !
                times blow out. Use parameter /TS to report on sort times.
!                                             y  !

.7. Internal secrets.
!G
   1. Variables used for field definitions:
!y    !
     a) validtypes:-
!y      w
          Format:- 'nn type hex', where,
!t                  y          !
=y               w!
            nn   - sequence number
            type - entity identifier
            hex  - hex entity record identifier (cols 13-14 in CSD VSAM
                   dataset).
=
          This variable is used to build the data entry screen and validate
          request type.
     b) itemflds:-
!y      w
          Defines all the fields that may be reported against individual entity
          types.  Refer to member CSDA$ for further details as it sets the
          variable values and contains processing sub-routines for specialised
          parsing.
     c) descflds:-
!y      w
          Can be considered a single field format of 'itemflds'.  The
!                                                     w       !
          descriptions have been removed to permit exclusion of descriptions as
          often they are too abstract and also using this format they can be
          forced to the end of the report to avoid clutter.
     d) exclflds:-
!y      w
          Fields to exclude from the defined "itemflds" variable during
!                                             w       !
          reporting.  Refer to member CSDA$ for setting of exclusion list.

 -----------------------------------------------------------------------
                             (End of Instructions.)
!G

*
* This should be the last entry.
*
* Note the index is not paragraphed but manually positioned as the
* start of the Index is before the "I.".
*
=Gb                                                                            G
*#I ?  This will tag as Index but leave line blank.
#                                  I. Index:
!G

=Gt                                                                            G
&  Good &#TOD. &CNAME..

   The following topics are presented in sequence or may be fast tracked by
   selecting from the codes below. Enter I to return to the Index:
!Gt                                      yt                                    G

=Gy 2w   b                                                                     G
    1  - Introduction.
    2  - Output sumary.
    3  - Parameters.
=Gy 2 w  b                                                                     G
    3a - Summary Positional.
    3b - Summary Keyword.
    3c - Detailed.
    3d - Positional parameters.
    3e - Positional.
    3f - Keyword parameters.
    3h - Keywords.
=Gy 2w   b                                                                     G
    4  - Screen entry fields.
    5  - Field selection screen.
    6  - Packaging.
    7  - Internal secrets.

=Gb                                                                            G

                               (End of Index.)
!Gt                                                                            G

!G
