%tutever='V3.05'
*
* Healine for the Tutorial panel
*
%headline=' CICS Changes Housekeeping ('csgchver') ';chgd=chgdate
%hyper_link=2
%helpused='Y';"ISPEXEC VPUT (helpused) SHARED"
.1. Introduction:
!G

 The CICS Support Group Change system is designed to automate the repetitive
!    yb   yb      yb    y b
 change control tasks and eliminate potentials for errors. It's primary function
 is to generate JCL with the appropriate names included to quickly process
 backup, stage, implement and backout changes in a batch environment.

 The change management system is based on a weekly change cycle with the
 expectation that changes will be prepared mid-week with mass implementation on
 the week-end. At times this may not be appropriate for emergency changes and
 the cycle can be changed either permanently or temporarily to a daily cycle.
 For further details refer to point 4.1 below.
!                                   2bgb

 It will also generate instructions that can be copied into the appropriate
 change system with minimal modifications.

 The system is primarily designed to apply changes to a staging CSD dataset with
 the implementation to take affect with the renaming of the CSD combined with a
 COLD start of CICS with similar backout procedures. However, if this is not
 practical, refer to section 24x7.
!                            2   b

.2. Parameters invoking the CSGCH command:
!G                          Y    G
 blank       - Use last settings.
!y           wb
 *           - Present all 'chghlq.*[*].CH*' datasets under ISPF 3.4.
!y           wb            y                 b
 dsname      - Dataset name of previously created changes JCL, (eg. ISPF 3.4).
!y           wb
               Use this feature after using the * option.
!              b                                yb
               Note: This may force a change in SYSID.
!              w    b
 -n|0|n      - Generation -n weeks before, current week or n weeks in future.
!y byby      wb           y  b                             yb
&              Eg. -2 --> '&CHGJC2.'.
!              b   y  b   y
 dd/mm/yyyy  - Valid European format date. This date will be used to generate
!y           wb
               the appropriate chnage date and generation (depending on the day#
!                                                                           y
               variable setting).
 SYSID=sid   - Force sysid different to LPAR executing on. The sysid in affect
!y           wb
               will be displayed left of the command prompt. (Will also be
               included in the change dataset name.)
 Note - Dataset name and generation parameters are mutually exclusive.
!w     b
      - When CSGCH is invoked with either the generation or date format and the
!w     b     y    b
        dataset does not exist, a create verification panel will be displayed
        warning that obsolete generations will be deleted. [ENTER] will
!                                                          y      b
        create/delete while END PF key will continue without creation.  Without
!                           y  b
        these parameters, the generation will be extracted from that last used
        in your profile.


.3. Commands in panel CSGCHP:
!G
 The following panel will be displayed (Note: this display may not reflect
 all the latest screen enhancements or may vary slightly from site to site):

  Menu  Utilities  Help
!w
 -------------------------------------------------------------------------------
!g
&                      CICS Changes Housekeeping                      &CSGCHVER.
&&SID. ===>
!w         4

&JCL into: 'DNMCICS.SYSE.CH 040214 ' . .Gen.( 0  ). .Env.( P )
!          y                4     y g         4g           4g
  STC ( stcname  ) BakUp STage IMple BkOut UPdat OpCmd   Valid sels as follows:
!g      4       g                                        1     6   1
   CSD . . . . . . .   . .   . .   . .   . .   . .       S(ubmit)   J(CL create)
!g                   4g    4g    4g    4g    4g    4w     b         wb
                                                         C(opy members)
!                                                        wb
=g                   4g    4g    4g    4g    4w           b
   JOBLIB. . . . . .   . .   . .   . .                   *(DSLIST wildcard)
   PROCLIB . . . . .   . .   . .   . .                   O(riginal DSNs/Source)
   PARMLIB . . . . .   . .   . .   . .                   E(dit/view dataset)
   TABLIB. . . . . .   . .   . .   . .                   L(ist) D(elete) dataset
!g                   4g    4g    4g    4g    4w           b     wb
   UTILLIB . . . . .   . .   . .   . .                   R(eview) B(atch review)
!g                   4g    4g    4g    4g    4w           b             wb
   AUTHLIB . . . . .   . .   . .   . .                   T(est live CSD implmnt)
                                                         ?(valid sels for oper'n
!                                                        wb
   LOADLIB . . . . .   . .   . .   . .
=
 CICS regions' for above LOADLIB (comma separated):

!4

!4

 Task No . . . . . 653792 <-only the last 6 digits will be used in member names
!g                 4      b
&Bounce CICS . . . Y      <-for CSD chgs. Reflects implement method in $$$&CMC.
!g                 4b
 JC Jobclass . C  Msgclass . X   Account No . .
!   g          4g            4g                 4                           g

                      ******************************

 The following are valid commands:
!g
 ?           - Invoke this tutorial. (But we already know this. Don't we?)
 *           - List all the change datasets in the shared DASD evvironment.
!y           wb
 $$$INDEX    - Turn automatic index creation on for the session. Use this
!y       b   wb
               command to activate index generation for session if feature is
               deactivated. See $$$INDEX member description below for further
!                               2       b
               details.
 ALTER nn|yymmdd
!y       by
             - Reschedule the entire dataset and all components (backup and
!            wb
               staging) datsets to a new change date derived from nn weeks from
               date of this change. JCL will be built and placed in member
               $ALTER. Alternatively pass new date in format yymmdd. This latter
!y                   b                                       y     b
               format is established from parameter > 2 digits.
?APPNDSTC (CSGCHELP=CSGCH$ APS) *
 APPEND=ON/Y | OFF/N
!y        by by   by
             - This command (and variable appndstc) have been provided to
!            wb                           2       b
               append the STCname value to the change dataset to permit
               seperation of mass changes. The intent is to move all the
               repetitive/duplicated tasks into their seperate dataset. All the
               same backup and staging datasets should be accessable from the
               sub-set. The status of this flag is kept in the configuration
               file.

 COPYANY     - BY default you may only copy members that match the variable
!y           wb
               Region mask, with allowance for values of Region ignore (refer to
!              t           b                             t         btb
               the DSName command), to the staging dataset(s).  This is designed
!                  2  b
               to protect the integrity of "non-CICS" datasets in proclibs etc..
               If the member is not matched, you will be advised accordingly.
               However, not all jobs or procs may adhere to naming conventions.
               This command will permit the copy of ANY member.
!                                                   y   b
 CONFIG      - Display the configuration details and dataset names
!y           wb
               used/generated by system. Refer to topic 10 (Site Customisation)
!                                                       2 b g                 b
               below. Will also list most of the major parameters. (Supersedes
               the DSNAME command.)
 CONFIG SAVE - Saves the configuration details to member $$$CONFG. Use this
!y           wb
               to save configuration without locking.
 CONFIG=memb - Change configuration using member memb. For further details refer
!y           wb                                  y   b
               to topic 10 (site customisation).
!                       2 b
               Note - This command will not create or alter the $$$CONFG member.
!              w    b                                           y        b
                      You can fake it though, by using the CONFIG= command then
!                                                          y       b
                      issuing a LOCK with an immediate UNLOCK. Thereafter this
!                               y    b                 y     b
                      config will always be used until another CONFIG= command.
 CSD# [HIGH] - Evaluate the STC name from the first CSD backup/staging job
!y           wb
               member name. (This is usefull to populate the field when you are
               not the change instigator.)
               Note - If there are more than one CSD backup in the dataset, the
!              w    b
                      lowest will be returned unless you pass a parameter of
                      HIGH which will insert the highest evaluated CSD.
!y                         b
&CReate      - Regenerate dataset '&CHGJCL.'.
!y           wb                   y
?DEL
 DELete n    - Delete the n generation of all the datasets. Valid values for n
!y           wb           yb                                                 y
               are -n,0,+n. You may append a + to signify all generation prior
!                  y      b                  y b
               to and including n. Eg. +2+ will delete all generations from +2
!                               yb     y   b                                y
               downwards. Watch this as this will include deletion of all past
               including the current.
               Because of the strength of this command it will only be executed
               in SIMULATE mode. To actually delete, pass a 2nd. parameter of
!                 y        b                                w    b
?AUTODEL (CSGCHELP=CSGCH$ AD) *
               APPLY. (Refer variable autodel in member CSGCH$.)
!              y    b                 2      b          2     b
 DSNames     - Display the dataset names used/generated by system. Refer to
!y           wb
               topic 10 (Site Customisation) below. Will also list most of the
!                    2 b g                 b
               major parameters.
&E|V|B       - Edit, View or Browse dataset '&CHGJCL.'.
!ybyby       wb                             y
 LEFT|RIGHT  - Toggle between main screen and expanded region screen. This
!y   by      wb
               feature is only available if the regions list ends with a +.
!                                                                        yb
               Note - ENQ on step to rename change dataset.
 LETCOPY     - Permit copy of all members. By default only members that meet the
!y           wb
               CICS naming standard (var regnmask in CSGCH$).
!                                        y        b  2     b
?LOCK
 LOCK        - Creates member $$$LOCKD whose presence is used to convert edit
!y           wb               y       b
               sessions to views and inhibits the entry of J or S in the matrix
!                                                          yb   yb
               to prevent accidental changes and JCL overrides when the change
               has been finalised. Use the UNLOCK command to permit changes.
!                                          y      b
               This command will also create member $$$CONFG.
!                                                   y       b
               It will also turn aotomatic index creation OFF. Use the $$$INDEX
!                                                                      2       b
               command to re-build the index under locked situations.
 REgions     - Regenerate the region list from executing regions.
!y           wb
 SET .....   - Modify all JCL generation parameter settings.
!y           wb
               Sub-parameters (does not include LOADLIB):
=              y     wb
               BU    - All backup JCL.
               ST    - All staging JCL.
               IM    - All implementation template JCL.
               BO    - All backout template JCL.
               UP    - All update JCL.
               OC    - All operator commands JCL.
               ALL   - All of the above (including LOADLIBs).
               AUDit - Flag all the members already generated.
               Flip  - Toggle all flag values (inludes LOADLIB).
               MIss  - All missing members for all options. Will only check for
=
                       $LP* members for the first region in the region list.
!                      y    b
               Can supply last parameter of OFF or ON for all but MISS. Default
!                                           y   b  y  b           y   b
               is ON.
!                 g b
 SIP=N|Y     - Change the CSD in SIT override parameter to designated value.
!y    by     wb
               (Refer to SIP or 24x7 hyperlink below.)
!                        2  b   2   b
 SYSID=sid   - Change the sysid from the default LPAR name. Will stay in affect
!y           wb
               until the next executions or explicit change.
=y           wb
 TASK# [HIGH]- Evaluate the highest task number from members in dataset and
               place the value in the task number field. (This is usefull to
               populate the field when you are not the change instigator.)
               Note - If there are more than one task number in the dataset, the
!              w    b
                      lowest will be returned unless you pass a parameter of
                      HIGH which will insert the highest number.
!y                         b
 TRIGGER     - This command is only applicable to the Telstra maintenance cycle.
!y           wb
               The command will invoke the standalone CSGCHTRG routine which
!                                                     y       b
               will provide the option to create trigger files to control the
               application of routine maintenance roll-outs to CICS regions.
?UNLOCK
 UNLOCK      - Deletes member $$$LOCKD whose presence is used to convert edit
!y           wb               y       b
               sessions to views and inhibits the entry of J or S in the matrix.
!                                                          yb   yb
               This will permit edits and JCL generation. Take care not to cream
               legitimate members.
               Note - While the LOCK command will turn auto index build off,
!              w    b           y   b
                      this command will not change the status of the auto index.
&&CMC.
!y
             - Manually generate change management member $$$&CMC..
!            wb                                           y
?CHGMANC (CSGCHELP=CSGCH$ CC) *
               This is the value stored in variable chgmanc set by CSGCH$ and
!                                                   2      b       2     b
               is used as the change member name prefixed by $G*.
!y           wb                                              y b

 Debugging commands:
!g
 TEST ON|OFF - Turn test mode on or off. With setting of OFF, TYPRUN=SCAN is
!y           wb                                          y  b y          b
               added to the jobcard to prevend accidental job execution.
 TRACE ON|OFF- Trace execution for debugging. Limit use as it will generate lots
=
               of output do to extensive use of loops.


.4. Points of interest:
!G
  1. Overtype the date input field (after the dataset name) to change the
! yb
     change dataset version.  The appropriate DOW will be calculated, however,
!                                             w   b
     the dataset will not be created. To create past versions you will need to
     combine this feature with the CREATE parameter. The generation will
!                                  y     b
     be adjusted accordingly.
  2. Overtype the generation input field (between the brackets) to change the
! yb
     change dataset version.  The appropriate DOW will be calculated, however,
!                                             w   b
     the dataset will not be created. To create past versions you will need to
     combine this feature with the CREATE parameter. The generation will
!                                  y     b
?CHGDAY (CSGCHELP=CSGCH$ CDAY) *
  3. To generate datasets with any date set the Gen field in the panel to *.
! yb                                            y  b                      yb
     With this setting any date entered or passed as a parameter will use that
     date in all the respective dataset names.  This should be used as an
     exeption rather than the rule. This value can be permanently changed by the
     chgday parameter in the CSGCH$ customisation member.
!    2     b                 2     b
     Note - If both the date and generation fields are changed, the generation
!w         b
            will take precedence.
  4. Overtype the environment type field to change the datasets from Production
! yb
     to Development. The value of this field will control the datasets being
     processed. Note the subtle differences between the development and
     production datasets.  By default, the production datasets will be
     processed.
     Note - At sites other than Telstra, this field provides an 8 byte
!w          b
            qualifier that is passed to CSGHC$ that can be used to fine tune
!                                       2     b
            dataset naming conventions.
  5. The implement and backout JCL generation should be run after the the backup
! yb
     and staging with the backout after the staging has been populated as the
     select statements are based on the members of the staging dataset.
     Note - Once the staging dataset has been created, it's respective implement
!    w      b
            and backout flags will be set to Y while the backup and staging
!                                            y b
            flags set to N.
!                        yb
          - You cannot select IM, BO, UP or OC options without a change number.
!    w      b                 yyb yyb yyb   yy b
  6. On first invocation of a new generation all the executing regions are
! yb
     presented with comma seperators.  You ONLY have to be concerned with this
     field if you wish to change region specific load libraries. (These are
     datasets that are unique per region.)
     Modify the list by deleting regions not affected by the change and add any
     regions that may be missing bacause of non-execution. (This will generate
     JCL for region specific load libraries.) On subsequent execution, the
     region list will be built from all the $LP* members that were previously
!                                           y    b
     processed.
     Note - Any data after the first space in the field will be ignored.
!    w      b
          - Enter REgions on the command line to rebuild region list from
!    w      b
            executing regions.
  7. To minimise overheads especially on LPARs with many regions, the backup and
!yyb
     staging datasets versions of load libraries for regions is actioned prior
     to creation of the new version as applicable.  These will not be affected
     by the DEL n command.
!           y     b
  8. You may move quickly to datasets by using the following flags:
!yyb
     E - Against a BU flag will view/browse the backup dataset (view on text and
!    y wb          y  b
         browse on loadlibs).
     E - Against a ST flag will edit/browse the staging dataset.
!    y wb          y  b
     L - ISPF 3.4 display of all generations.
!    y wb
     O - Against a BU flag will view the original dataset, against certain ST
!    y wb          y  b
         will DSLIST source datasets.
       - Against a ST loadlibs will bring up the source dataset(s) list using
!      wb          y  b
         ISPF 3.4. Using this navigation, you can change the SYSLMOD statement
         in the link-edit step to the staging dataset.
     The actual dataset to be processed will also depend on the setting of the
     environment flag.
     The above options against the load library will bring up a dataset list for
     the respective datasets for all the CICS regions.
?CT
  9. For systems where the CSD is not in the SIP and the changes are made to the
!y b
     live system you may test the changes as follows. Enter T against the CSD BU
!                                                           yb                y
     option to create member $CSDTSTI from members $C%xxxx and IC....  A copy of
!                            y        b            y       b   y    b
     the current CSD is made with your userid in the name.  The update step will
     apply the changes to this copy of the CSD.  By entering T against the CSD
!                                                            yb
     BO option, JCL will be cloned from the BC... job and if it is NOT and
!    y  b                                   y     b
     IDCAMS ALTER operation, JCL will be generated to apply the backout to the
     above copy of the CSD (stored in member $CSDTSTB).
!                                            y       b
 10. To perform a CSD compare prior to implementation enter B against the CSD UP
!y b                                                        y b               y
     option to create member $CSDCOMP. The process will look at the update
!                            y       b
     member IC..../PC.... (depending on SIP) and look for any groups or lists
!           y     by     b
     processed between the PGM=DFCSDUP step's SYSIN DD and before the
     terminating //.  It will also check for any datasets allocated to the SYSIN
     and process those as well.  Any potential hits will be presented in a free
     form panel for acceptance or manual tailoring. Update either the list or
     group lists accordingly with comma seperators.  It will generate the
     appropriate EXTRACT commands against both the staging and original CSDs.
!                y      b
     These extracts will be compared in batch.  Extracts will be made in
     accordance with the following commands detected:
=y                 wb
            ADd    - list
            ALter  - group
            APpend - list
            Copy   - group
            DEFine - group
            DELete - Depends on the 1st. character of the 2nd. word.
                     List or Group.
            Remove - list
=
 11. To manipulate JCL generated and maintain consistency, enter DSName on the
!yyb                                                             2  b   b
     command line to bring up the CICS changes datasets screen.  Enter UPDATE on
!                                                                      2 b    b
     the command line to place the dataset name field into input mode. Change
     the dataset accordingly and enter U in the selection field. This will make
!                                      y b
     the change effective until you either exit or change the generation/date
     value which will reset all base values.
?TA
 12. When editing JCL to assemble tables, enter O against the Staging/tablib
!y b                                            yb            y b     y
     matrix to present a DSLIST of potential table sources (assumes JCL is in
     the same dataset). Modify the table and edit the JCL and hit it with macro
     CSGCHSRC to change the SYSLMOD to the appropriate staging name. IEHIBALL
!    y        b
     the JCL and manually change RCT anomalies.
 13. Each time a new generation is created, a cleanup process is entered
!y b
&    and if autodel is set to apply all datasets older than &#VER. days will be
!           2      b                                        yb
     deleted. For further details refer to the DEL command processing.
!                                              2  b
?4.14
 14. There is a field on the panel labelled Bounce CICS which is used in the
!y b                                       y           b
     change docket generation to indicate that a console commands batch job that
     issues "CEDA install group" commands to activate the changes instead of the
     traditional COLD start.
     This message will also appear against the backout process. It is the change
     detailer's responsibility to ensure that the console commands batch job
     contains the appropriate "CEMT discard" statements.
     Note - This field will temporarily be set to 'N' if the OC field is
!w          b                                      wb        y b
            selected (J) for the CSD as the primary reason for console commands
            is to circumvent bounces.  This temporary change will NOT be carried
!                                                                 w  b
            between sessions.
 15. The jobid for each job will be the same as the member name.  For some this
!y b
     can be confusing when trying to track down the job under SDSF. You may set
     a parameter in CSGCH$ called jidasmem to N and the jobid will be prefixed
!                   2     b       y       b   yb
     by CSGCH followed by a 1 character dataset identifier and a two character
!       y    b
     operation id.  The original member name will still be reflected as the
     programmer name on the job card unless it is explicitly changed.
 16. You may reset the account number to site defaults by blanking out the field
!y b
     and hitting [ENTER].
 17. Long live Butter Chicken.
!y b           gyrwbp tgyrwbpt


.5. GOTCHAs:
!G
  1. Updates to regions WITHOUT CSD SIP overrides are against the CURRENT
!y r
     CSD.
!r
  2. Selecting a loadlib option for additional regions will overwrite any
!y b
     previously updated member as JCL for ALL regions will be generated.  To
     prevent overwrites, remove previously processed regions from the region
     list.
  3. Generation refers to the relative position to the current week which is
!y b
     referred to as generation 0. Each week this relative generatin will incre-
!                             yb
     ment. If you generate a change for gen +1(next week) don't forget to
!                                            y b
     change the generation to 0 when next week is reached.
!                             yb
  4. When actioning multiple changes in a SysPlex, backups and staging creations
!y b
     may be duplicated in subsequent processing. These duplicate jobs should not
     be run. (No damage will be caused if re-run other than staging changes may
     be backed out.)
  5. Some sites mix SMS management between the live dataset names and backup and
!y b
?
?SMSMANGD (CSGCHELP=CSGCH$ SMM) *
     staging hlqs. For this reason the smsmangd variable is provided so that
!                                      2       b
     the appropriate JCL can be generated to create the respective datasets. Use
     the DSName option with the UPDATE feature to temporarily toggle SMS
!        2  b                   y     b
     management.
  6. Regenerating implement and backout JCL may have adverse affect if the
!y b
     operation is deletion of member(s) as the dafault first step is an IEBCOPY
!                 y       b
     with a member selection.  If the JCL is regenerated under these
     circumstances, ensure the JCL is manually edited to bring the delete step
     to the top.

    AHCTOGs:  Reverse GOTCHAs:
!G
  1. If the timing of changes to the CSD is critical, the implement or process
!y r
     jobs will have a CSD backup prefix step(s) to ensure all is in sync. You
     may need to delete the backup steps if not applicable. Remember the JCL
     gen'd is a template, not a must use all steps.

.6. Members created:
!G
  $$$CONFG- Configuration member. This member stores details like STCname, task
! y       wb
            number and configuration file used. It also contains CICS regions
            identified in the change. This member is created everytime a LOCK
!                                                                        y
            command is issue and if exists will be used when the change dataset
            contating this member is processed.
?$$$INDEX
?AUTOINDX (CSGCHELP=CSGCH$ AI) *
  $$$INDEX- Index of members in dataset. Automatically built by the default
! y       wb
            setting of autoindx in CSGCH$. Turn it off if you want to manually
!                      2       b   2     b
            keep track of members in the index. You can manually maintain it
            using the INDEX macro. (Edit the member and enter INDEX ? on the
!                     y    b                                  y       b
            command line.)  You can auto build it with the CSGCH default
            descriptions by using the $$$INDEX command, however, it WILL cream
!                                     y       b                     r   b
            manual INDEX entries.

! y       wb
  $$$LOCKD- Member to prevent edit, JCL generation or auto submission. Created
! y       wb
            by command LOCK and deleted by UNLOCK. (Can be manually created or
!                      2   b               2     b
            deleted.)
            Note - The presence of this member will automatically turn the
!           w    b
                   automatic index build feature off.
  $AUTH*  - JCL to process the *.AUTHLOAD dataset.
! y       wb                   g          b
  $CSDCOMP- Compare staging with current.
! y       wb
  $CSD*   - JCL to play what-if process on a copy of the CDS dataset.
! y       wb
  $ALTER  - JCL to reschedule change datasets to a new date (nn weeks from
! y       wb                                                 y b
            current process change date as per the ALTER parameter).
!                                                  y     b
  $CSxxxx - JCL to generate staging dataset from CDS CICSxxxx dataset. The
! y       wb                                         y        b
            member will be tailored on the STC/CSD name field displayed on the
            main screen.
  $CUxxxx - JCL to generate update dataset from CDS CICSxxxx dataset.
! y       wb                                        y       b
  $Lcnnn* - JCL to process the region specific LOADLIB (Where c=D for
! y       wb                                                  gby b
            development and P for production and nnn identifies the specific
!                           y b
            region.)
  $PARM*  - JCL to process the PARMLIB dataset.
! y       wb
& $JOBL*  - JCL to process the JOCLIB dataset (note that &CHGHLQ. hlq is used).
! y       wb
& $PROC*  - JCL to process the PROCLIB dataset (note that &CHGHLQ. hlq is used).
! y       wb
  $TAB*   - JCL to process the CICS tables TABLIB dataset.
! y       wb
  $UTIL*  - JCL to process the in-house UTILLIB dataset.
! y       wb
  The above members* may have one or more of the following suffix:
!           y       b
  BU  - Backup dataset.
! y   wb
  ST  - Create an empty staging dataset.
! y   wb


.7. Members created for specific changes:
!G
  $G*     - Change management system instructions summarising activities in the
! y       wb
            change dataset to be cut/paste into the formal change management
?           system (&CMC.).
!                   y     b
            Note - This member is created by explicitly using the change command
!           w    b
?CHGMANA (CSGCHELP=CSGCH$ CA) *
                   or automatically if variable chgmana is set in CSGCH$ and the
!                                               y      b          2     b
                   change LOCK is not on.
!                         2   b
  $O*     - SYSIN parameters for CEDA install groups in batch for implementation
! y       wb
            without a bounce. This member will be suffixed with the task number.
            The initial template is built from the detected GROUP names found in
!                                                           y    b
            the IC* member and the CICS regions in the Region field. Both the
!               y  b
            implement and backout jobs should reference this same member as
            backout install groups should be the same as the install groups. For
            this reason the BO option should not be selected until the CSD
!                           y b
            implementation JCL is finalised.
  BA*     - Backout AUTHLIB changes.
!y        wb
  BC*     - Backout CSD rename.
!y        wb
  BLc*    - Backout load library chages. (Refer above for value of c.)
!y        wb                                                       gb
  BO*     - Backout using console commands. This will process member $O* above.
!y        wb                                                         y  b
  BP*     - Backout parmlib changes.
!y        wb
  BJ*     - Backout JOBlib chages.
!y        wb
  BR*     - Backout proclib chages.
!y        wb
  BT*     - Backout CICS table changes.
!y        wb
?PROCBU
?PARMBU
  BU*     - Backout in-house UTILLIB changes.
!y        wb
  B%*     - Any other non-standard backout job built to compliment standard
!y        wb
            processes.
  B#CSG   - Member to be submitted by CICS Support Group to submit all the
!y        wb
            backout (B*) jobs (except this one).
!                    y b
  I**     - Implementation jobs. Same as the backouts above.
!y        wb
  I#CTRLM - Member to be submitted by Control-M to submit all the implement (I*)
!y        wb                          g         b                            y b
            jobs (except this one).
  P#CSG   - Member to be submitted by CICS Support Group to submit all the
!y        wb
            process (P*) jobs (except this one). This is generated for cases
!                    y b
            when many process jobs has to be submitted prior to actual
            implemenation and there is a fine line whether these jobs should be
            I** type jobs.
  PC*     - Preliminary CSD changes (updates). (Built from UP option.)
!y        wb                                               y  b
  P%*     - Any other non-standard job built to compliment standard pre-change
!y        wb
            processes.


.8. Valid matrix flags and use:
!G
 The reverse area below is referred to as the matrix:
!    W      b

  Menu  Utilities  Help
!w
 -------------------------------------------------------------------------------
!g
&                      CICS Changes Housekeeping                      &CSGCHVER.
&&SID. ===>
!w         4

&JCL into: 'DNMCICS.SYSE.CH 040214 ' . .Gen.( 0  ). .Env.( P )
!          y                4     y g         4g           4g
  STC ( stcname  ) BakUp STage IMple BkOut UPdat OpCmd   Valid sels as follows:
!g      4       g                                        1     6   1
   CSD . . . . . . .   . .   . .   . .   . .   . .       J(CL) create   S(ubmit)
!g                   W                              w     b             wb
                                                         C(opy members)
!g                                                  w     b             wb
=g                   W                        w           b
   JOBLIB. . . . . .   . .   . .   . .                   *(DSLIST wildcard)
   PROCLIB . . . . .   . .   . .   . .                   O(riginal DSNs/Source)
   PARMLIB . . . . .   . .   . .   . .                   E(dit/view dataset)
   TABLIB. . . . . .   . .   . .   . .                   C(opy dataset)
   UTILLIB . . . . .   . .   . .   . .                   L(ist) D(elete) dataset
!g                   W                        w           b     wb
   AUTHLIB . . . . .   . .   . .   . .                   B(atch review) R(eview)
!g                   W                        w           b             wb
                                                         ?(valid sels for oper'n
!                                             w           b             wb
   LOADLIB . . . . .   . .   . .   . .
!g                   W                        w           b             wb
=
 CICS regions' for above LOADLIB (comma separated):

!4

!4

 Task No . . . . . 653792 <-only the last 6 digits will be used in member names
!g                 4      b
&Bounce CICS . . . Y      <-for CSD chgs. Reflects implement method in $$$&CMC.
!g                 4b
 JC Jobclass . C  Msgclass . X   Account No . .
!   g          4g            4g                 4                           g

                      ******************************


 The following are valid matrix flag values:
  ?  - Will give a list of flags permitted for that particular field. (Any
!y   wb
       invalid character will do the same.)
  B  - Batch review. Executes SuperCE in batch.
!y   wbyb                     g       b
       Under CSD UP, a template will be generated to compare the staging CSD
!                y b
       created with the current CSD.
  C  - Copy members. Only permitted in BU for copy into ST.
!y   wbyb                              y  b             y b
       You may sort list on Changed or Name . You may also locate members.
  D  - Delete dataset. Only permitted in BU and ST.
!y   wb                                  y  b   y b
  E  - Edit/view/browse dataset. Only permitted in BU and ST columns.
!y   wb                                            y b    y b
       For parmlib and proclib will view BU and edit ST, all other datasets' BU
!                                        y b         y b                     y
       and ST will be browsed.
!          y b
  J  - Generate JCL.
!y   wb
  L  - ISPF 3.4 list.
!y   wb
  N  - Do not generate JCL.
!y   wb
  O  - Only available under BU and ST columns.
!y   wb                     y  b   y  b
       In BU column will view original dataset.
!         y  b
       In the ST column will (only available for region specific loadlib, Tablib
!             y  b
       and Utillib) will give ISPF 3.4 DSlist for source datasets as defined in
       the CSGCH$ member.
!          2     b
  R  - ISPF's SuperCE. Under BU, compares original with backup. Under ST,
!y   wb       g      b       y b                                      y b
       compares staging with backup.
       This option is not available for load module datasets.
  S  - Generate JCL and submit job. Only permitted for BU and ST jobs.
!y   wb                                                y  b   y  b
  T  - Test option only available if SIP=N.
!y   wb                              2  b
     - In IM this option will combine the $CUxxxx and the implement CSD job
!y   wb   y b                             y       b
       (IC...) into member $CSDTSTI which outputs to a dataset with your userid
!y            b            y       b
       in the name. You can then run this job to see if the batch CSD update
       achieves the desired purpose.
     - In BO this option will copy the backout CSD changes from member BC....
!y   wb   y b                                                          y
       (only if NOT a rename) into member $CSDTSTB and apply the backouts to the
!                                         y       b
       same dataset created and updated by member $CSDTSTI.
!                                                 y       b

.9. Packaging:
!G
 The following members are required to package this routine.
   REXX:
!g
=y            wb
     CSGCH    - Main driver.
?CSGCH$ (CSGCHELP=CSGCH$) *
     CSGCH$   - Configuration customisation module. (Enter CSGCH$ on the command
!y            wb                                           2     b
                line for a description of this member.)
     CSGCH$VF o CSGCH$ member verifier
     CSGCHELP o Dynamic tutorial text (you are reading it).
     CSGCHSLV - Routine to create change management records (for cut/paste).
     CSGCHSRC - Edit macro to change the SYSLMOD dataset in "table" assembly
                JCL to point to the staging dataset. May need to be manually
                doctored for RCT destination.
     CSGCHXCU o CSD change exit sample
     CSGCHXJC o Jobcard exit sample
     CSGCHXOC o Console Command exit sample.
     CSGCHXTP o Macro for tailoring CSD extracts for batch file compares.
     CSGCHXWO o WTO message exit sample.
     $DATEMAN - Date manipulation routine.
     HELPDRVR o Dynamic tutorial driver.
     HELPTN   o Dynamic tutorial navigation text.
     RECV     o Receive XMITed members. (Optional Telstra utility.)
     $ALKJCPG o Routine to return non standard 'program name' for use on JOBCARD
                for applicable sites. (Lack of this feature at applicable sites
                may cause JCL errors.
     $CSTRING - String change maipulation routine.
     $TTRUNC  o Translate/truncate strings (handy option for CSGCH$ processing).
     $WHOAMI  o Generic user identifier.
     $WORDAT  - Return word a character position.
   Panels:
!g
     CSGCHP   - Main data entry/control panel.
     CSGCHPCO - Copy member selection panel.
     CSGCHPDY - Table display for dataset names generated (DSName command).
     CSGCHPD1 - Same as CSGCHPDY with sequence numbers for debug and R&D.
     CSGCHPH  - Information panel that HELP PF key is not functional.
     CSGCHPLR - List/group selection panel for CSD compare.
     CSGCHPR  - Supplementary regions display panel.
     HELPDRVP o Dynamic tutorial display panel.
     RECVP    o Receive XMITed members panel. (Optional Telstra utility.)
   Skeletons:
!g
     HELPDRVS o Dynamic tutorial print template.
   Programs:
!g
     BATCHSIN - Batch symbolic substituter.  Permit variable substitutions in
                JCL instream SYSIN statements.
     DFH0CBDC o CSD extract program for file compares.
=

 Members marked with the o seperator are not mandatory for operation (but you
!                        wb
 wouldn't be viewing this without them).


?DSN
.10. Site Installation.
!G
 For site installation cursor place or enter INSTALL on the command line:
!                                            2      b
?INSTALL (CSGCHELP=CSGCH$RM) *
     INSTALL - Site installation.
!    2      w b

?UPDATE
.11. Site Customisation:
!G
 There is a procedure to customise dataset names and miscellaneous parameters
 for individual sites.
 This is achieved through REXX member CSGCH$. This member needs to be manually
!                                     2     b
 edited on each site and updated as required. Coding logic may need to be used
 to generate some of the datasets. There are comments at the bottom of the
 member describing each variable. Macro CSGCH$VF is available to validate
!                                       y       b
 variable definitions.

 The datasets may be viewed using the DSName command (refer option 3 "Commands
!                                     2  g   b                     2b g
 in panel CSGCHP").
!g              b
 In this customisation/viewing screen the following selections are available:
   S - Invokes ISPF option 3.4 using the dataset mask.
!y   wb
   ? - If that entry is set in CSGCH$, it will invoke the CSGCH$ tutorial and
!y   wb                        2     b                    2     b
       issue a find 'field-name' to give a description of the field.

 For the session only, you may further customise datasets to cater for those
 ugly one-off-gremlin situation as follows:
   1. Enter DSName on the command line.
!  yb       y  b
   2. In the dataset name display panel enter UPDATE on the command line.
!  yb                                         2     b
   3. The screen will be placed into input mode. In free hand, overtype any
!  yb
      input part of the screen to affect the dataset name change. This will
      stay in place until the end of the session.
      Note - Changes will not be passed to the CSGCHSRC macro.
!     w     b                                  y       b
           - Generate all the JCL before exiting otherwise this operation will
!          wb
             need to be repeated.

 Several exit points are available. The following variables need to be set im
 member CSGCH$:
!       2     b
?EXJOBCRD (CSGCHELP=CSGCH$ EXT) *
?EXCSDUPD (CSGCHELP=CSGCH$ EXT) *
     exjobcrd - Job card exit.   Sample member "CSGCHXJC".
!    2       w b                                y       b
     excsdupd - CSD update exit. Sample member "CSGCHXCU".
!    2       w b                                y       b
     excsdopc - CSD Console command exit. Sample member "CSGCHXOC".
!    2       w b                                         y       b
     exwtomsg - WTO message exit. Sample member "CSGCHXWO".
!    2       w b                                 y       b

 For certain occasions you may wish to mass change a number of values without
 permanently change CSGCH$ member or manually change using the UPDATE feature.
!                   2     b                                    y     b
 This can be achieved by copying sample customisation member CSGCHCF1 into your
!                                                            y       b
 specified member in the SYSEXEC concatenation. Change all the variables
 required (take note of variables marked as non customisable).  Any variables
 not set (ie. set to NULLS) will not be returned. This customised member can
 then be invoked using command CONFIG=new_member. These changes will stay in
!                              y                b
 affect for the session only.
 Note - This method is recommended in preference to the UPDATE option as these
!w      b                                               2     b
        changes can be readily verified and recreated.
        The following is a list of variables that can be changed using
        this feature (if missing variables need to be changed, make
        temporary changes to CSGCH$):
!                            2     b
          #ver,auth_a,auth_o,autodel,batchdsn,batchsin,bustexst,chghlq,
!g            bg     bg     bg      bg       bg       bg       bg     b
          chgjclc,chgjclw,chgmana,chgmanc,chgmano,cicshlq,cicstl1,
!g               bg      bg      bg      bg      bg      bg      b
          cicstl2,comp_PDS,conscmd,conslib,csd_o,csd_w,csdbreq,csdext,
!g               bg       bg      bg      bg    bg    bg      bg     b
          csdsip,ctrl_M,day#,disaudit,excsdopc,excsdupd,exjobcrd,
!g              bg     bg   bg       bg       bg       bg       b
          exoprcmd,extmacs,exwtomsg,helpdrvr,helpdsn,jidasmem,jobl_#,
!g                bg      bg       bg       bg      bg       bg     b
          jobl_o,load_a,load_r,loadlib,parm_#,parm_o,proc_#,proc_o,
!g              bg     bg     bg      bg     bg     bg     bg     b
          regnveri,siteenvt,smsmangd,subit,sysexec,tab_a,tab_o,userhlq,
!g                bg       bg       bg    bg      bg    bg    bg      b
          util_a,util_o,
!g              bg     b
          conscmdi.
!g                b


?CSDSIP  (CSGCHELP=CSGCH$ SIP) *
?24x7
?SIP
*11
.12. 24x7 Operations:
!G
 For 24x7 operation you where you cannot bounce the CICS region but must apply
 CSD changes. This can be achieved by the csdsip variable setting in member
!                                         2     b
 CSGCH$.
!2     b
 If you wish to apply changes to the current CSD, set csdsip=N in member CSGCH$.
!                                                     y       b          2     b
 This will infer that the CSD is "JCL allocated" and cannot be renamed.  In this
 case the ST and BU columns will be toggled and the procesing rules are as
!         y b    y b
 follows:
=y        w b
       BU - Backup up the CSD.
       ST - Option not available.
       IM - Implement achieved by update to the live CSD.
       BO - Two part templates. First part is for CSD rename and bounce of CICS
=
            as per SIP=Y. The second part is a live CSD update with template
!                  y    b
            deleting changed groups and copying from backup. It is the
            responsibility of the change detailer to change the templates to
            ensure the appropriate JCL is executed.
       UP - Unavailable as update is through the IM.
!y        w b                                    y b
       OC - Issue console commands to install implemented/restored groups for
!y        w b
            implement/backout actions respectively.

 In sites where csdsip=Y and you wish to backup the CSD or update the
!               y       b
 production CSD on the fly (using batch jobs) enter SIP=N on the command
!                                                   y    b
 line to temporarily change the flag off. This will generate the
 appropriate JCL.
 Note - On next invocation of the change system, the SIP value will be reset to
!y    w b
        that in the CSGCH$ member.
!                   2     b

                             (End of instructions.)
!G
*
*
*
#W. Walkthrough example.
!G

 On the LPAR that the change is to be implemented on (or use parameter of
 SYSID=sid if on another LPAR in the sysplex):
!y     g  b

 1. The first time the implementor invokes the change system for the week they
!y b
    should enter TSO CSGCH xxxx if they wish to create a new change JCL dataset,
!                y         w    b
    where xxxx can be the generation number or a European format date of
!         w   b
    dd/mm/yyyy.  If the dataset does not exist, you will be prompted by a create
!   y         b
    new/delete old confirmation screen. If [ENTER] is entered the new dataset
    will be created as 'TPCICS.sid.CHyymmdd' where sid is either the current
!                      y       g  y         b      g  b
    LPAR name or system id from a SYSID= parameter and yymmdd will be the
!                                 y     b              y      b
    prev/next DOW date as derived from the generation or date supplied.
    Any obsolete generations will be deleted depending on the autodel setting.
    In either case a summary of delete action will be displayed.
    Note - Dataset name may vary according to accounts.
!w        b
         - Entry without parameters will inform user if dataset does not exist
!w        b
           but will NOT prompt for creation.
         - For different changes accross LPARS in a SysPlex, backups and staging
!w        b
           generation may have already been made from other changes.

 2. Determine which dataset(s) will be changed and enter an S against
!y b                                                        yb
    both the BU and ST columns to generate and submit the JCL in one step.
!            y b    y b
    Note - No damage can be done by this step unless staging changes have
!w        b
           already been made and reprocessing will cream existing changes.

 3. For proclib and parmlib changes, enter C in the BU column to invoke a copy
!y b                                       yb       y b
    dialog to copy selected members from the backup dataset to the staging
    dataset.

 4. Make the appropriate changes to the staging members as required.
!y b

 5. For CSD changes enter J against the UP and BO columns to generate the
!y b                      yb            y b    y b
    apropriate JCL template. A task number is required to permit generation of
    these members.  Customise the update member PC.... to reflect the CSD
!                                               y     b
    changes required and submit against the staging dataset.

 6. Enter B against the CSD UP column to generate CSD extracts and compare jobs.
!y b      yb                y b
    A panel will be displayed listing the lists and groups that were hit in the
!                                         w   b     w    b
    update job. Verify/customise both the list and group lists prior to
    generating JCL. Enter any customisation macros to be applied (comma
    seperated) against the extracts before comparison if applicable.  Submit
    JCL, browse the output and fine tune extracts until satisfied.

 7. For the load module type datasets, enter O against the ST column to present
!y b                                         yb            y b
    the sOurce under ISPF option 3.4. If the source is in a dataset other than
!        yb
    that pointed to by the source under the DSN display, use the UPdate feature
!                                           2  b                 2     b
    to temporarily change the dataset.  (This change may be made permanent in
    member CSGCH$).
!          2     b
    Edit/update the source and under ISPF 3.4 (reached through the change system
    option O) edit the JCL and enter CSGCHSRC. THis will generate a SYSLMOD
!          yb                        y       b                      y
    statement pointing to the ST dataset used at implementation time. You may
!                             y b
    need to fine tune it. The important thing is to ensure that the output is
    the Staging dataset. Submit the job(s).

 8. Once you have assembled/linked all load modules/tables enter J against all
!y b                                                             yb
    the appropriated datasets in the IM and BO columns to generate IEBCOPY
!                                    y b    y b
    select statements for both the implementation and backout jobs.
    Note - Proclib and parmlib datasets will automatically be compressed if they
!w        b
           are PDS's. The other loadlibraries' compression will be determoned by
?COMP_PDS (CSGCHELP=CSGCH$ CP) *
           the value of comp_PDS variable in CSGCH$.
!                       2       b            2     b

 9. For region specific loadlibs, customise the region list to contain only
!y  b
    those regions that are to be modified.

 10.Each time that JCL generation is requested or enter is hit without any
!y  b
    field/command changes members $$$INDEX, B#CSG and I#CTRLM will be rebuilt.
!                                 y       by      b   y       b
    This is designed to pick up any new or deleted implement or backout members.
    Note - members B#CSG and I#CTRLM will not be rebuild if the change number
!w         b       y     b   y       b
    field is blank. You must have some numeric value in there to trigger the
    build and it does not have to be a legitimate change number (eg. use a token
    1 as the value).

 11.The implementation process is dependant on the status of the CICS change
!y  b
    system and the Control-M interface.  (However, if manual implementation is
!                  g         b
    active, use the I#CTRLM member to submit all the jobs unless there is only
!                   y       b
    one implementation job whereby it's just as easy to submit it.)

 12.The B#CSG job should include all the backout jobs required to restore
!y  b   y     b
    status quo.  If partial backout is to take place either tailor the job
    accordingly or submit backout members as and when required.


                             (End of Walkthrough.)
!G
*
*
*
#CC. CSD Compare.
!G
 For regions where the CSD changes are applied to the staging datase, you may
 compare the changed staging dataset with the active dataset to ensure that the
 differeces appear to be valid.

 To generate the JCL enter B against the CSD UP option. During this process the
!                          yb                y b
 CSD update job (PCtask#) member will be scanned for any GROUP and LIST changes
!                y      b                                y    b    y   b
 against the following matrix:
=y           wb
     ADd     - List name extracted. (Group name extracted for install JCL.)
     ALter   - Group name extracted.
     APpend  - List name extracted.
     Copy    - Group name extracted.
     DEFine  - Group name extracted.
     DELete  - Group or list name extracted depending on the statement
               qualifier.
     Remove  - List name extracted.
=
 Both these lists will be presented in a panel for fine tuning.  You also have
 the oportunity to customise the extracts using pre-defined macros. Multiple
 macros may be executed by entering their names in order of desired execution
 (comma seperated). If one macro list is blank while the other is not, the blank
?EXTMACS (CSGCHELP=CSGCH$ EXM) *
 one will be populated from the other. Variable extmacs in member CSGCH$ may be
!                                               2      b          2     b
 set to automatically populate the field.  The macros must reside in dataset
&  '&SYSEXEC.'
!  y
 There is room for at least 4 8 byte macro names (comma seperated).
 The generated JCL will extract the listed LISTs and GROUPs from both the
 staging and current CSDs into a permanent dataset
&  '&CSDEXTS.'
!  y
 If any macro are entered, a copy will be taken (with llq of first 4 bytes).
 The extract or edited extrac will be compared using Super-CE in batch. The JCL
 will be stored in member $CSDCOMP. In the group/list tunning screen, you may
!                         y       b
 enter any pre-processing macro to be executed on the extracts prior to the
 compare step.

 Predefined tailoring macros:
   CSGCHXTP - Leave only 'DEFINE' statements and programs associated with
!y          wb
              transactions.

                             (End of CSD Compare.)
!G
*
*
*
#CT. CSD Update Test.
!G
 If the active CSD is updated, you may want to test your implement job.  This
 can be achieved by entering T in the CSD IM option when SIP=N is set (option
!                            yb           y b            2  y b
 not available with SIP=Y).  This will generate member $CSDTSTI which will be a
 combination of the $CUxxxx and the ICtask# members with the destined csd
!                   y      b        y      b
&having the 2nd.  level qualifier substituted by &USERID..
!                                                y
 You can also test the backout by entering T in the CSD BO option. The BCtask#
!                                          yb           y b
 member will be cloned with the output as the same dataset as in the implement
 test.
 Note - In both cases any IO* or BO* (console commands) will not be tested.
!w      b

                             (End of CSD Update Test.)
!G
*
*
*
#TA. Table assembly (load libraries).
!G
 Little can be done to automate the generation of load modules. However if you
 edit the JCL to assemble the source using O against the ST option you will be
!                                          yb            y b
 presented with a DSLIST under ISPF 3.4. Edit the JCL and enter CSGCHSRC on the
!                                                               y       b
 command line to tailor the syslmod statement as per the CSGCH$ defined load
!                                                        2     b
 library with the correct staging extension.


                           (End of Table Assembly.)
!G
*
*
*
#                                   I. Index
!G                                                                             G
=Gb                                                                            G

!Gy                                                                            G
*     Hello there.
&    Hello &CNAME..

     The following topics are presented in sequence or may be fast tracked
     by selecting from the codes below:
!Gb                                                                            G

=Gb   2w  b                                                                    G
      1 - Introduction
      2 - Parameters invoking the CSGCH command.
      3 - Commands in panel CSGCHP.
      4 - Points of interest.
      5 - GOTCHAs.
      6 - Members created.
      7 - Members created for specific changes.
      8 - Valid matrix flags and use.
      9 - Packaging.
=Gb  2 w  b                                                                    G
     10 - Site Installation.
     11 - Site customisation.
     12 - 24x7 Operations:
=Gb                                                                            G

     The following topics will only be presented if selected by code:

=Gb  2 w  b                                                                    G
     W  - Walk Through example.
     CC - CSD Compare.
     CT - CSD Update test (if udating active CSD).
     TA - Table Assembly.

!Gb                                                                            G
     **
!Gy                                                                            G
?TN (CSGCHELP=HELPTN) *
     TN - Tutorial navigation.
!Gb  2 w  b                                                                    G
?TT (CSGCHELP=HELPTT) *
* TT - Tutorials Tutorial.
*Gb  2 w  b                                                                    G
=Gb                                                                            G

                              (End of Index.)
!G                                                                             G
=

 Text with underscore are generally fast paths to other parts of the tutorial.
!          2         b
 Enter I on the command line to return to this index.
!      2b
 Enter END PF key to exit tutorial.
!      y   b
