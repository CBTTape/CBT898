     TITLE 'SYSEVENT TRANSWAP SRB ROUTINE'
* THIS SRB ROUTINE WILL ISSUE A BRANCH ENTRY TRANSWAP.
* A PARAMETER AREA MUST BE PASSED (SRBWK) CONTAINING THE CALLER'S ASCB
* ADR, THE ECB TO BE POSTED, AND WORK AREAS (SVAREA).
* SCHEDULED BY NOSWAP--SEE COMMENTS THERE FOR DOCUMENTATION
*
NOSWAPTR CSECT
         LR    12,15         DO NOT CHG ANYTHING BETWEEN HERE AND
         USING NOSWAPTR,12
         B     M5TRNSWL      M5TRNSWO WITHOUT UPDATING NOSWAP TO
         DC    CLB'NOSWAPTR' POINT TO M5TRNSWO (HARD CODED THERE)
M5TRNSWO ABEND 4095,DUMP
         DC    C'TRANSWAP SRB  ROUTINE ABEND'
M5TRNSWL DS    0H
         LR    9,14          SV RTN ADR
         LR    4,1           SV PARM ADR (WKAREA)
         USING SRBWK,4
         LA    13,SRBSV
         SLR   0,0
         SLR   1,1
         SLR   15,15
         SYSEVENT TRANSWAP,ENTRY=BRANCH
         L     2,SRBAS       LOAD ASCB ADR OF CALLER
         POST  SRBECB,BRANCH=YES,ASCB=(2),ERRET=ONNO
         LR    14,9
         BR    14
ONNO     DS    0H
         ABEND 4094,DUMP
         DC    C'CROSS MEM POST ERR RETURN'
         DROP  4
SRBWK    DSECT               WK AREA PASSED TO SRB ROUTINE
SRBECB   DS    F             ECB TO BE POSTED BY THIS SRB ROUTINE
SRBAS    DS    F             ASCB ADR FOR TASK CALLING THE SRB ROUTINE
SRBSV    DS    18F           SAVE AREA FOR SRB ROUTINE USE
SRBWKL   EQU   *-SRBWK
         CVT   DSECT=YES
         END   NOSWAPTR
